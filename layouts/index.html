{{ define "main" }}
  {{ $featuredBool := where .Site.RegularPages "Params.featured" true }}
  {{ $featuredStr := where .Site.RegularPages "Params.featured" "true" }}
  {{ $featured := sort (union $featuredBool $featuredStr) "Date" "desc" }}

  <main class="home">
    {{ partial "home-rail.html" . }}

    <section class="home-main">
      <article class="home-about">
        <div class="content">
          {{ .Content }}
        </div>
      </article>

      {{ if gt (len $featured) 0 }}
        <section class="home-featured">
          <header class="section-header">
            <p class="section-header__eyebrow">Spotlight</p>
            <h2>Featured posts</h2>
          </header>
          <div class="post-grid">
            {{ range $index, $post := first 6 $featured }}
              {{ partial "post-card.html" (dict "page" $post "index" $index) }}
            {{ end }}
          </div>
        </section>
      {{ end }}
    </section>
  </main>
{{ end }}
