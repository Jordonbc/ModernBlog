{{ $brandName := .Site.Params.brandName | default (replaceRE "^Blog \\|\\s*" "" .Site.Title) }}
{{ $eyebrow := .Site.Params.homepageEyebrow | default "Technical blog" }}

<section class="home-rail">
  <header class="home-masthead">
    {{ with $eyebrow }}
      <p class="home-masthead__eyebrow">{{ . }}</p>
    {{ end }}
    <h1 class="home-masthead__title">{{ $brandName }}</h1>
    {{ with .Site.Params.homepageSubtitle }}
      <p class="home-masthead__subtitle">{{ . }}</p>
    {{ end }}
  </header>

  <nav class="home-rail__nav" aria-label="Primary">
    {{ range .Site.Menus.main }}
      {{- $isExternal := or (strings.HasPrefix .URL "http://") (strings.HasPrefix .URL "https://") (strings.HasPrefix .URL "//") -}}
      {{- $href := cond $isExternal .URL (.URL | relURL) -}}
      <a class="home-rail__link" href="{{ $href }}">{{ .Name }}</a>
    {{ end }}
    <a class="home-rail__link" href="{{ "index.xml" | relURL }}">RSS</a>
  </nav>

  {{ with .Site.Params.sidebarTagline }}
    <div class="home-rail__footer">
      <p>{{ . | markdownify }}</p>
    </div>
  {{ end }}
</section>
